(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(9),s=n.n(i),a=n(39),j=n(11),o=(n(96),n(18)),l=n(29),u=n(86),d=n(163),b=n(4),h={winX:window.innerWidth,winY:window.innerHeight,user:"",theme:Object(u.a)({palette:{primary:{main:"#673ab7"},secondary:{main:"#2979ff"},tertiary:{main:"#1de9b6"}}})},O=function(e,t){switch(t.do){case"resize":return Object(l.a)(Object(l.a)({},e),{},{winX:window.innerWidth,winY:window.innerHeight});case"signin":return Object(l.a)(Object(l.a)({},e),{},{user:t.name});default:throw new Error("Invalid action type: ".concat(t.do))}},x=Object(c.createContext)(),f=function(e){var t=Object(c.useReducer)(O,h),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){function e(){i({do:"resize"})}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),Object(b.jsx)(x.Provider,{value:[r,i],children:Object(b.jsx)(d.a,{theme:r.theme,children:e.children})})},m=function(){return Object(c.useContext)(x)},v=n(164),g=n(167),w=n(168),p=n(169),y=n(170);var C=function(){var e=Object(j.f)();return Object(b.jsx)(v.a,{position:"static",children:Object(b.jsxs)(g.a,{variant:"dense",children:[Object(b.jsx)(w.a,{variant:"h6",style:{flexGrow:1},children:"Socket IM"}),Object(b.jsx)(p.a,{edge:"end",color:"inherit",onClick:function(){e.push("/")},children:Object(b.jsx)(y.a,{})})]})})},E=n(171),S=n(88),W=n(177),k=n(173);var M=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=m(),s=Object(o.a)(i,2)[1],a=Object(j.f)();function l(e){e.preventDefault(),s({do:"signin",name:n}),a.push("/chatroom")}return Object(b.jsx)(E.a,{maxWidth:"sm",style:{marginTop:"8rem"},children:Object(b.jsx)(S.a,{className:"main-card",elevation:3,children:Object(b.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){return l(e)},children:[Object(b.jsx)("div",{style:{margin:"0.5rem 2rem"},children:Object(b.jsx)(W.a,{fullWidth:!0,label:"Username",variant:"standard",value:n,onChange:function(e){return r(e.target.value)}})}),Object(b.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(e){return l(e)},children:"Enter Chatroom"})]})})})},z=n(175),G=n(176),H=n(85),I=n.n(H),N=n(172),R=n(174);var J=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),j=a[0],l=a[1];return Object(c.useEffect)((function(){var t=r;e.res&&t.push(e.res),t.length>20&&t.shift(),console.log("set new array"),i(t)}),[e.res]),Object(b.jsxs)(E.a,{disableGutters:!0,style:{color:"white"},children:[Object(b.jsxs)("div",{children:["Messages:",Object(b.jsx)(N.a,{children:r.map((function(e){return Object(b.jsxs)(R.a,{children:[e.user,": ",e.msg]})}))})]}),Object(b.jsxs)(z.a,{container:!0,spacing:2,style:{marginTop:"1rem"},children:[Object(b.jsx)(z.a,{xs:!0,item:!0,children:Object(b.jsx)(W.a,{fullWidth:!0,size:"small",label:"New Message",variant:"filled",color:"secondary",value:j,onChange:function(e){return l(e.target.value)}})}),Object(b.jsx)(z.a,{item:!0,children:Object(b.jsx)(k.a,{variant:"contained",onClick:function(){e.sendMsg(j),console.log("sent message")},color:"secondary",children:"Send"})})]}),console.log("finished render")]})};var L=function(){return Object(b.jsx)("div",{children:"Room list"})};var T=function(){return Object(b.jsx)("div",{children:"User list"})};var U=function(){var e=Object(j.f)(),t=Object(c.useRef)(null),n=Object(c.useState)(null),r=Object(o.a)(n,2),i=r[0],s=r[1],a=m(),u=Object(o.a)(a,1)[0];return Object(c.useEffect)((function(){return u.user||e.push("/"),t.current=I()(),t.current.on("msgex",(function(e){return s(Object(l.a)({},e))})),function(){return t.current.disconnect()}}),[]),u.user?Object(b.jsxs)(E.a,{maxWidth:"xl",disableGutters:!0,children:[Object(b.jsxs)(w.a,{variant:"h4",style:{textAlign:"center"},children:["Hello, ",u.user]}),Object(b.jsxs)(z.a,{container:!0,spacing:1,fullWidth:!0,children:[Object(b.jsx)(z.a,{item:!0,md:3,children:Object(b.jsx)(L,{})}),Object(b.jsx)(z.a,{item:!0,xs:!0,md:6,children:Object(b.jsx)(J,{res:i,sendMsg:function(e){t.current.emit("msg",{user:u.user,msg:e})}})}),Object(b.jsx)(z.a,{item:!0,sm:3,md:3,children:Object(b.jsx)(T,{})})]})]}):Object(b.jsx)(G.a,{className:"chatroom-card",children:"..."})};var X=function(){return Object(b.jsx)(f,{children:Object(b.jsxs)(a.a,{children:[Object(b.jsx)(C,{}),Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{exact:!0,path:"/",children:Object(b.jsx)(M,{})}),Object(b.jsx)(j.a,{path:"/chatroom",children:Object(b.jsx)(U,{})})]})]})})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(X,{})}),document.getElementById("root"))},96:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.42194131.chunk.js.map