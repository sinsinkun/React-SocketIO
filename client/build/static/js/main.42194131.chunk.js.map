{"version":3,"sources":["components/GlobalStore.js","components/Navbar.js","components/Main/index.js","components/Chatroom/Messageslist.js","components/Chatroom/Roomlist.js","components/Chatroom/Userlist.js","components/Chatroom/index.js","App.js","index.js"],"names":["initialData","winX","window","innerWidth","winY","innerHeight","user","theme","createMuiTheme","palette","primary","main","secondary","tertiary","reduceFn","state","action","do","name","Error","StoreContext","createContext","StoreProvider","props","useReducer","dispatch","useEffect","handleResize","addEventListener","removeEventListener","Provider","value","ThemeProvider","children","useStoreContext","useContext","Navbar","winLocation","useHistory","AppBar","position","Toolbar","variant","Typography","style","flexGrow","IconButton","edge","color","onClick","push","Home","Main","useState","setUser","updateStore","login","e","preventDefault","Container","maxWidth","marginTop","Paper","className","elevation","noValidate","autoComplete","onSubmit","margin","TextField","fullWidth","label","onChange","target","Button","MessagesList","msgs","setMsgs","input","setInput","newMsgs","res","length","shift","console","log","disableGutters","List","map","msg","ListItem","Grid","container","spacing","xs","item","size","sendMsg","RoomList","Userlist","Chatroom","socket","useRef","setRes","store","current","socketIO","on","data","disconnect","textAlign","md","emit","sm","Card","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.42194131.chunk.js","sourcesContent":["import { createContext, useReducer, useContext, useEffect } from \"react\";\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\n\r\nconst initialData = {\r\n  winX:window.innerWidth, \r\n  winY:window.innerHeight,\r\n  user:\"\",\r\n  theme:createMuiTheme({\r\n    palette: {\r\n      primary: { main: \"#673ab7\" },\r\n      secondary: { main: \"#2979ff\" },\r\n      tertiary: { main: \"#1de9b6\" }\r\n    }\r\n  })\r\n};\r\n\r\n/*! IMPORTANT all your reducer functionality goes here */\r\nconst reduceFn = (state, action) => {\r\n  switch (action.do) {\r\n  case \"resize\":\r\n    return {...state, winX:window.innerWidth, winY:window.innerHeight};\r\n  case \"signin\":\r\n    return {...state, user:action.name};\r\n  default:\r\n    throw new Error(`Invalid action type: ${action.do}`);\r\n  }\r\n}\r\n\r\nconst StoreContext = createContext();\r\n\r\nconst StoreProvider = function(props){\r\n  const [state, dispatch] = useReducer( reduceFn, initialData );\r\n\r\n  useEffect(() => {\r\n    // add listeners for window resize\r\n    function handleResize() { dispatch({do:\"resize\"}) };\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  })\r\n  return (\r\n    <StoreContext.Provider value={[state, dispatch]}>\r\n      <ThemeProvider theme={state.theme}>\r\n        {props.children}\r\n      </ThemeProvider>\r\n    </StoreContext.Provider>\r\n  )\r\n}\r\n\r\nconst useStoreContext = function(){ return useContext(StoreContext) };\r\n\r\nexport { StoreProvider, useStoreContext }","import { useHistory } from \"react-router-dom\";\r\nimport { AppBar, Toolbar, Typography, IconButton } from '@material-ui/core';\r\nimport { Home as HomeIcon } from '@material-ui/icons';\r\n\r\nfunction Navbar() {\r\n\r\n  const winLocation = useHistory();\r\n\r\n  function goToMain() { winLocation.push(\"/\") }\r\n\r\n  return(\r\n    <AppBar position=\"static\">\r\n      <Toolbar variant=\"dense\">\r\n        <Typography variant=\"h6\" style={{flexGrow:1}}>Socket IM</Typography>\r\n        <IconButton edge=\"end\" color=\"inherit\" onClick={goToMain}><HomeIcon /></IconButton>\r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\n\r\nexport default Navbar;","import { Container, Paper, TextField, Button } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useStoreContext } from \"../GlobalStore\";\r\n\r\nfunction Main() {\r\n\r\n  const [user, setUser] = useState(\"\");\r\n  const [, updateStore] = useStoreContext();\r\n  const winLocation = useHistory();\r\n\r\n  function login(e) {\r\n    e.preventDefault();\r\n    updateStore({ do:\"signin\", name:user });\r\n    winLocation.push(\"/chatroom\");\r\n  }\r\n\r\n  return(\r\n    <Container maxWidth='sm' style={{marginTop:\"8rem\"}} >\r\n      <Paper className=\"main-card\" elevation={3} >\r\n        <form noValidate autoComplete=\"off\" onSubmit={e => login(e)}>\r\n          <div style={{margin:\"0.5rem 2rem\"}}>\r\n            <TextField fullWidth label=\"Username\" variant=\"standard\" \r\n              value={user} onChange={e => setUser(e.target.value)} />\r\n          </div>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={e => login(e)}>Enter Chatroom</Button>\r\n        </form>\r\n      </Paper>\r\n    </Container>  \r\n  )\r\n}\r\n\r\nexport default Main;","import { Container, Button, TextField, Grid, List, ListItem } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction MessagesList(props) {\r\n\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let newMsgs = msgs;\r\n    if (props.res) newMsgs.push(props.res);\r\n    if (newMsgs.length > 20) newMsgs.shift();\r\n    console.log(\"set new array\");\r\n    setMsgs(newMsgs);\r\n    // eslint-disable-next-line\r\n  }, [props.res])\r\n\r\n  function sendMsg() {\r\n    props.sendMsg(input);\r\n    console.log(\"sent message\");\r\n  }\r\n\r\n  return(\r\n    <Container disableGutters style={{color:\"white\"}}>\r\n      <div>\r\n        Messages:\r\n        <List>\r\n        {msgs.map(msg => {\r\n          return <ListItem>{msg.user}: {msg.msg}</ListItem>\r\n        })}\r\n        </List>\r\n      </div>\r\n      <Grid container spacing={2} style={{marginTop:\"1rem\"}}>\r\n        <Grid xs item>\r\n          <TextField fullWidth size=\"small\" label=\"New Message\" variant=\"filled\" color=\"secondary\" \r\n            value={input} onChange={e => setInput(e.target.value)} />\r\n        </Grid>\r\n        <Grid item>\r\n          <Button variant=\"contained\" onClick={sendMsg} color=\"secondary\">Send</Button>\r\n        </Grid>\r\n      </Grid>\r\n      {console.log(\"finished render\")}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default MessagesList;","function RoomList() {\r\n  return(\r\n    <div>\r\n      Room list\r\n    </div>\r\n  )\r\n} \r\n\r\nexport default RoomList;","function Userlist() {\r\n  return(\r\n    <div>\r\n      User list\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Userlist;","import { useState, useEffect, useRef } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Card, Typography, Container, Grid } from \"@material-ui/core\";\r\nimport socketIO from 'socket.io-client';\r\nimport { useStoreContext } from \"../GlobalStore\";\r\nimport MessagesList from './Messageslist';\r\nimport RoomList from './Roomlist';\r\nimport Userlist from './Userlist';\r\n\r\nfunction Chatroom() {\r\n\r\n  const winLocation = useHistory();\r\n  const socket = useRef(null);\r\n  const [res, setRes] = useState(null);\r\n  const [store] = useStoreContext();\r\n\r\n  useEffect(() => {\r\n    // if no user, redirect to main\r\n    if (!store.user) winLocation.push(\"/\");\r\n    // establishing socketIO connection\r\n    socket.current = socketIO();\r\n    // event: server sent message\r\n    socket.current.on(\"msgex\", (data) => setRes({...data}) );\r\n    // disconnect on component unload\r\n    return () => socket.current.disconnect();\r\n    // eslint-disable-next-line\r\n  },[])\r\n\r\n  function sendMsg(msg) {\r\n    socket.current.emit(\"msg\", {user:store.user, msg:msg});\r\n  }\r\n\r\n  if (store.user) return (\r\n    <Container maxWidth=\"xl\" disableGutters>\r\n      <Typography variant=\"h4\" style={{textAlign:\"center\"}}>Hello, {store.user}</Typography>\r\n      <Grid container spacing={1} fullWidth>\r\n        <Grid item md={3}><RoomList /></Grid>\r\n        <Grid item xs md={6}><MessagesList res={res} sendMsg={sendMsg} /></Grid>\r\n        <Grid item sm={3} md={3}><Userlist /></Grid>\r\n      </Grid>\r\n    </Container>\r\n  )\r\n  else return (\r\n    <Card className=\"chatroom-card\">...</Card>\r\n  )\r\n}\r\n\r\nexport default Chatroom;","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport './components/style.css';\nimport { StoreProvider } from './components/GlobalStore';\nimport Navbar from './components/Navbar';\nimport Main from './components/Main';\nimport Chatroom from './components/Chatroom';\n\nfunction App() {\n\n  return (\n    <StoreProvider><Router>\n        <Navbar />\n        <Switch>\n          {/* Content to switch between */}\n          <Route exact path=\"/\"><Main /></Route>\n          <Route path=\"/chatroom\"><Chatroom /></Route>\n        </Switch>\n        {/* Footer */}\n      </Router></StoreProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}